# ==============================================================================
# 试卷分析助手 - 环境变量配置模板
# ==============================================================================
# 使用说明：
# 1. 复制此文件为 .env
# 2. 填入你的真实API密钥
# 3. 不要将 .env 文件提交到Git仓库
# ==============================================================================

# 1. 豆包 (Doubao) 配置
# 请将你的 API Key 填在下方等号后面
DOUBAO_API_KEY=your_doubao_api_key_here
DOUBAO_BASE_URL=https://ark.cn-beijing.volces.com/api/v3
# 请填入你在火山引擎控制台创建的推理接入点 ID (Model ID)
DOUBAO_MODEL_ID=your_model_id_here

# 2. 阿里云 (Aliyun / DashScope) 配置
ALIYUN_API_KEY=your_aliyun_api_key_here
ALIYUN_BASE_URL=https://dashscope.aliyuncs.com/compatible-mode/v1
ALIYUN_MODEL_ID=qwen-plus

# 3. 智谱 (ZhipuAI) 配置
ZHIPU_API_KEY=your_zhipu_api_key_here
ZHIPU_BASE_URL=https://open.bigmodel.cn/api/paas/v4
ZHIPU_MODEL_ID=glm-4

# 当前使用的模型提供商 (可选: doubao, aliyun, zhipu)
DEFAULT_PROVIDER=doubao

# 生产环境配置
NODE_ENV=production
PORT=3002

# 并发控制
MAX_CONCURRENT_JOBS=2

# 缓存配置
IMAGE_ANALYZE_CACHE_TTL_MS=604800000  # 7天
JOB_TTL_MS=7200000                     # 2小时

# 超时配置
LLM_TIMEOUT_MS=120000                  # 2分钟
LLM_RETRY_COUNT=1
LLM_RETRY_BASE_DELAY_MS=800

# Hedge请求配置（提高可靠性）
HEDGE_ENABLED=1
HEDGE_AFTER_MS=3800
HEDGE_AFTER_MS_PER_IMAGE=450
HEDGE_SECONDARY_PROVIDER=aliyun

# 限流配置 (Production)
DISABLE_RATE_LIMIT=0
RATE_LIMIT_PER_MINUTE_PER_CODE=60
RATE_LIMIT_PER_MINUTE_PER_IP=30
DAILY_QUOTA_PER_CODE=1000
DAILY_QUOTA_PER_IP=500

# 日志级别
LOG_LEVEL=info

# 数据目录
DATA_DIR=./data
FEEDBACK_DIR=./data/feedbacks

# 内存管理
MAX_JOBS_IN_MEMORY=200
JOB_EVENT_BUFFER_SIZE=40
