# 试卷分析助手 - 项目迭代路线图 (Roadmap)

本文档是项目的**唯一迭代计划**，整合了战略白皮书与技术开发路线图。

## 🌟 核心愿景与北极星

**一句话定位**：我们不做“拍照搜题给答案”的工具，我们做**“考试复盘与提分闭环”**的智能助手。打造一款**“高颜值、强交互、深智能”**的个人学习指挥舱。

**北极星指标 (North Star Metric)**：**“有效闭环率”** —— 用户生成复盘卡后，在 48 小时内完成训练并进行验收测试的比例。

---

## 🛡️ 开发约束宣言（红线）

> **所有开发与迭代必须遵守以下约束，防止需求蔓延与方向跑偏。**

1.  **闭环优先原则**：任何功能如果没有对应的“训练”或“验收”环节，**坚决不做**。不生产无法闭环的“信息垃圾”。
2.  **不扩散原则**：在 MVP 阶段，严禁扩展到非毕业班年级、严禁做社区/社交功能、严禁做大而全的内容库。
3.  **合规底线**：严禁提供“直接抄袭答案”的路径；所有输出必须以“引导思考”和“训练掌握”为目的。
4.  **数据最小化**：不收集非必要的隐私数据；试卷原始图片处理后即刻脱敏，不长期存储未授权的个人信息。

---

## 🚀 版本迭代计划

### Phase 1: 验证期 (MVP) - 单科闭环与体验重构 (Current Focus)
**战略目标**：在数学或英语单科上，跑通“试卷 -> 三卡（复盘/训练/验收） -> 提分”的最小闭环。
**技术目标**：建立“教育科技感”视觉语言 (Glassmorphism HUD)，完成核心功能开发。

#### 1.1 业务功能闭环 (V1.0 - V1.5)
- [x] **复盘卡（诊断）**：
    - [x] 错因强制归类（知识漏洞、方法错误、审题失误等）。
    - [x] 输出“最短改法”（如：审题圈画关键词）。
- [x] **训练卡（行动）**：
    - [x] 生成“今日任务” (15-30 分钟/组)。
    - [x] 分层推题：基础巩固 -> 变式训练 -> 迁移提升。
- [x] **验收卡（闭环）**：
    - [x] 生成 3-5 道同型小测题。
    - [x] 判定掌握度，决定是否翻篇。

#### 1.2 视觉与交互重构 (V1.5x - Completed)
- [x] **V1.54 视觉系统确立**
    - [x] **玻璃拟态 (Glassmorphism)**：轻量级半透明卡片。
    - [x] **学科主题色引擎**：自动适配数/语/英等学科色调。
    - [x] **关键动效**：分析扫描、卡片飞入。
- [x] **V1.55 交互升级 (HUD 风格)**
    - [x] **HUD 弹窗系统**：支持拖拽，半透明模糊背景。
    - [x] **操作区重组**：Control Panel 统一收纳。
- [x] **V1.56 响应式深度适配**
    - [x] 移动端 Bottom Sheet 优化。
    - [x] 桌面端“左导航-中分析-右检查器”三栏布局。

#### 1.3 P0 级任务验收条款（红线）
> **任何一条不满足，均视为未交付。**

- **证据链（复盘卡）**
    - [x] **错因来源可追溯**：每个错因必须标注【题号】【原始得分/满分】【关联知识点/题型】。
    - [x] **历史复发可量化**：重复错因必须展示复发次数（例如：“审题失误（复发3次）”）。
    - [x] **置信度必须展示**：每个错因必须带置信度（高/中/低），低置信度必须提供用户确认/纠错入口。
    - [x] **无证据不展示**：无法定位证据的错因不允许出现在复盘卡中。
- **验收判定（验收卡）**
    - [x] **通过/不通过逻辑明确**：规则必须具体且可解释，并在验收开始前对用户可见。
    - [x] **不通过自动触发二次训练**：失败后自动进入二次训练（原题重做/同类题减量训练/最小提示后重做）。
    - [x] **验收结果不可手动修改**：用户/家长不能手动改判定结果。
- **最小提示链（训练/二次训练）**
    - [x] **严禁直接给答案**：不一次性给完整步骤或最终答案。
    - [x] **提示必须分层**：至少三层（审题引导/思路提示/关键步骤起始），逐层解锁。
    - [x] **使用提示必须验收**：查看高层提示的题目，其同类题必须强制进入验收卡验证。
- **家长驾驶舱**
    - [x] **一屏四要素**：仅展示【今日任务完成率】【最近验收通过率】【高频错因复发趋势】【明日核心任务预告】。
    - [x] **严禁默认展示题目细节**：题目/解析/手写默认不展示，需二次点击或授权。
    - [x] **趋势优先于单点**：以折线/柱状等趋势为主，不以单次罗列为主。
- **MVP 界面骨架**
    - [x] **学生端一屏三卡**：一屏内清晰展示复盘卡/训练卡/验收卡入口或核心状态。
    - [x] **三分钟上手原则**：首次登录引导 3 分钟内可开启第一次训练卡。
    - [x] **关键按钮恒在**：【开始训练】【开始验收】为最高优先级操作按钮。

#### 1.4 可执行版本定义（V0.1–V0.3）
- **V0.1（最小闭环试点）**
    - [x] 交付：复盘卡（诊断）→训练卡（任务）→验收卡（判定与二次训练）。
    - [x] 采集指标：首次闭环完成时间；48 小时内训练+验收比例（有效闭环率）；错因复发率下降；验收通过率。
- **V0.2–V0.3（在 V0.1 验证后推进）**
    - [x] 家长驾驶舱一屏四要素：完成率、验收通过率、错因复发趋势、明日任务。
    - [x] 失败解释机制：分数未涨时，定位“哪类错因未消亡/哪次验收未通过”。

---

### Phase 2: 成长期 (V2.0) - 功能深度化 & 全科覆盖
**战略目标**：从单科扩展到全科，引入非智力因素干预（考场策略），形成完整的“备考教练”。
**技术目标**：实现错题本 2.0、自适应推题引擎，支持多用户档案。

#### 2.1 核心功能升级
- [ ] **错题本 2.0 (Error Ledger)**
    - [ ] **结构化存储**：按知识点、错误类型自动分类。
    - [ ] **标签系统**：支持自定义标签 (#粗心 #计算错误)。
    - [ ] **导出中心**：一键生成 PDF 错题集（去手写痕迹）。
- [ ] **自适应推题引擎 (Adaptive Practice)**
    - [ ] 对接 LLM，根据历史错题动态调整难度。
    - [ ] **举一反三**：单题生成三道变式。
- [ ] **全科看板**
    - [ ] 多学科错因分布，识别跨学科共性问题（如审题习惯）。

#### 2.2 扩展支持
- [ ] **考场策略包**：基于数据生成个性化“答题时间表”与“检查清单”。
- [ ] **多用户/多档案支持**：家长视角切换不同学生档案。

---

### Phase 3: 拓展期 (V3.0) - 全平台 & 生态构建
**战略目标**：将“闭环方法论”迁移至考公/职称领域，构建开放内容生态。
**技术目标**：云端同步，社区分享，插件系统。

- [ ] **云端同步**：账号体系打通，多设备数据同步。
- [ ] **社区分享**：匿名分享“学霸报告”，查看易错点热力图。
- [ ] **新场景拓展**：
    - [ ] **主观题评分对齐**（考公申论/职称案例）：AI 逐条打分。
    - [ ] **面试模拟教练**（语音交互）。
- [ ] **插件系统**：开放接口，接入第三方题库或打印服务。

---

## 🎨 设计规范 (Glassmorphism HUD)

基于 V1.5x 的迭代成果，确立**“Glassmorphism HUD (磨砂玻璃指挥舱)”**设计语言。

### 1. 色彩体系 (Color System)
- **基调**：保持 `Slate-50` (浅灰) 为主背景，保证长时间阅读舒适度。
- **点缀 (Accent)**：
    - **科技蓝 (Tech Blue)**：用于边框、选中态、图表线条 (参考 HEX `#3B82F6`)。
    - **信号色 (Signal Colors)**：
        - 🟢 优势/通过：荧光绿光晕 (#16a34a)
        - 🔴 风险/错误：柔和红光晕 (#f59e0b / #dc2626)
- **暗黑模式 (Dark Mode)**：
    - **未来扩展**：提供“沉浸复习模式”，切换至深空蓝背景，完全复刻 HUD 风格。

### 2. 组件规范 (Component Specs)
- **弹窗 (Modals)**：
    - **HUD 风格**：`backdrop-filter: blur(24px)`，背景 `rgba(255, 255, 255, 0.75)`。
    - **边框**：`1px solid rgba(255, 255, 255, 0.5)` + 内发光。
    - **交互**：必须支持**拖拽 (Draggable)**，给予用户掌控感。
- **按钮 (Buttons)**：
    - **主操作**：渐变色填充 + 投影。
    - **次操作**：幽灵按钮 (Ghost Button)，仅边框 + 文字。
- **表格 (Tables)**：
    - 行高亮 (Hover Highlight)。
    - [ ] 列宽可拖动调整 (Pending)。

### 3. 交互规范
- **全悬浮**：桌面端 Dock 胶囊，右侧 Inspector 可折叠/拖拽。
- **直觉反馈**：拖拽手势 (`grab`/`grabbing`)，悬停微位移。

---

## 🛠 技术栈维护计划
- **Frontend**: React + TypeScript + Vite + CSS Variables (Theme Engine).
- **Backend**: Node.js (Express) + LLM SDK.
- **Testing**: 引入 Vitest 进行单元测试，Playwright 进行 E2E 测试。

