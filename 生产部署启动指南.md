# ç”Ÿäº§éƒ¨ç½²å¯åŠ¨æŒ‡å—

## ğŸ“‹ éƒ¨ç½²å‰æ£€æŸ¥æ¸…å•

### âœ… ä»£ç è´¨é‡æ£€æŸ¥
- [x] TypeScript ç±»å‹æ£€æŸ¥é€šè¿‡ï¼ˆé›¶é”™è¯¯ï¼‰
- [x] æ‰€æœ‰ç»„ä»¶æµ‹è¯•é€šè¿‡
- [x] æ€§èƒ½æµ‹è¯•è¾¾æ ‡ï¼ˆ60fpsï¼‰
- [x] å…¼å®¹æ€§æµ‹è¯•é€šè¿‡ï¼ˆ4ä¸ªæµè§ˆå™¨ï¼‰

### âœ… åŠŸèƒ½å®Œæ•´æ€§æ£€æŸ¥
- [x] æ¸è¿›å¼åŠ è½½åŠ¨ç”»æ­£å¸¸
- [x] ç½®ä¿¡åº¦æ˜¾ç¤ºå‡†ç¡®
- [x] ç”¨æˆ·åé¦ˆç³»ç»Ÿå·¥ä½œ
- [x] åç«¯ API å¯¹æ¥æˆåŠŸ
- [x] æ•°æ®æŒä¹…åŒ–æ­£å¸¸

### âœ… å®‰å…¨æ€§æ£€æŸ¥
- [ ] API å¯†é’¥å·²é…ç½®ï¼ˆéœ€è¦æ£€æŸ¥ backend/.envï¼‰
- [ ] è®¿é—®æ§åˆ¶å·²å¯ç”¨
- [ ] æ•°æ®åŠ å¯†å·²é…ç½®
- [ ] CORS ç­–ç•¥å·²è®¾ç½®

### âœ… æ€§èƒ½ä¼˜åŒ–æ£€æŸ¥
- [x] ä»£ç å·²å‹ç¼©
- [x] å›¾ç‰‡å·²ä¼˜åŒ–
- [x] ç¼“å­˜ç­–ç•¥å·²é…ç½®
- [x] CDN å·²å‡†å¤‡ï¼ˆå¯é€‰ï¼‰

---

## ğŸ”§ ç¯å¢ƒé…ç½®

### 1. æ£€æŸ¥åç«¯é…ç½®

```bash
# æŸ¥çœ‹ .env æ–‡ä»¶
cat backend/.env
```

**å¿…éœ€é…ç½®**:
```env
# å¤§æ¨¡å‹é…ç½®ï¼ˆè‡³å°‘é…ç½®ä¸€ä¸ªï¼‰
DOUBAO_API_KEY=your_doubao_api_key
DOUBAO_MODEL_ID=your_model_id

# æˆ–è€…
ALIYUN_API_KEY=your_aliyun_api_key
ALIYUN_MODEL_ID=your_model_id

# æˆ–è€…
ZHIPU_API_KEY=your_zhipu_api_key
ZHIPU_MODEL_ID=your_model_id

# æœåŠ¡å™¨é…ç½®
PORT=3002
NODE_ENV=production

# å¹¶å‘é…ç½®
MAX_CONCURRENT_JOBS=2

# ç¼“å­˜é…ç½®
IMAGE_ANALYZE_CACHE_TTL_MS=604800000  # 7å¤©
```

### 2. å®‰è£…ä¾èµ–

```bash
# åç«¯ä¾èµ–
cd backend
npm install --production

# å‰ç«¯ä¾èµ–
cd frontend/web
npm install --production
```

### 3. æ„å»ºå‰ç«¯

```bash
cd frontend/web
npm run build
```

**éªŒè¯æ„å»º**:
```bash
# æ£€æŸ¥æ„å»ºäº§ç‰©
ls -lh dist/
```

---

## ğŸš€ å¯åŠ¨æœåŠ¡

### æ–¹å¼ 1: å¼€å‘æ¨¡å¼ï¼ˆæ¨èç”¨äºæµ‹è¯•ï¼‰

```bash
# ç»ˆç«¯ 1: å¯åŠ¨åç«¯
cd backend
npm run dev

# ç»ˆç«¯ 2: å¯åŠ¨å‰ç«¯
cd frontend/web
npm run dev
```

**è®¿é—®åœ°å€**: `http://localhost:5173`

---

### æ–¹å¼ 2: ç”Ÿäº§æ¨¡å¼

#### åç«¯ç”Ÿäº§å¯åŠ¨

```bash
cd backend
npm run build  # å¦‚æœæœ‰ TypeScript ç¼–è¯‘
npm start      # æˆ– node server.js
```

#### å‰ç«¯ç”Ÿäº§éƒ¨ç½²

**é€‰é¡¹ A: ä½¿ç”¨ Nginx**

```nginx
# /etc/nginx/sites-available/exam-analyzer
server {
    listen 80;
    server_name your-domain.com;

    # å‰ç«¯é™æ€æ–‡ä»¶
    location / {
        root /path/to/frontend/web/dist;
        try_files $uri $uri/ /index.html;
    }

    # åç«¯ API ä»£ç†
    location /api {
        proxy_pass http://localhost:3002;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
    }
}
```

**é€‰é¡¹ B: ä½¿ç”¨ PM2**

```bash
# å®‰è£… PM2
npm install -g pm2

# å¯åŠ¨åç«¯
cd backend
pm2 start server.js --name exam-analyzer-backend

# æŸ¥çœ‹çŠ¶æ€
pm2 status

# æŸ¥çœ‹æ—¥å¿—
pm2 logs exam-analyzer-backend
```

---

## ğŸ§ª ç”Ÿäº§ç¯å¢ƒæµ‹è¯•

### 1. å¥åº·æ£€æŸ¥

```bash
# æ£€æŸ¥åç«¯æœåŠ¡
curl http://localhost:3002/api/health

# é¢„æœŸå“åº”
{"status":"ok","timestamp":1736668800000}
```

### 2. åŠŸèƒ½æµ‹è¯•

#### æµ‹è¯• 1: ä¸Šä¼ å›¾ç‰‡åˆ†æ
```bash
# ä½¿ç”¨æµ‹è¯•è„šæœ¬
node test_desktop_images_v2.js
```

#### æµ‹è¯• 2: æäº¤åé¦ˆ
```bash
# è®¿é—®å‰ç«¯
http://your-domain.com

# æ‰§è¡Œæ“ä½œ
1. ä¸Šä¼ è¯•å·å›¾ç‰‡
2. ç­‰å¾…åˆ†æå®Œæˆ
3. ç‚¹å‡»åé¦ˆæŒ‰é’®
4. æäº¤åé¦ˆ

# éªŒè¯åé¦ˆæ•°æ®
cat data/feedbacks/user-feedbacks.jsonl | tail -n 1 | jq .
```

#### æµ‹è¯• 3: æ€§èƒ½æµ‹è¯•
```bash
# ä½¿ç”¨ Apache Bench
ab -n 100 -c 10 http://localhost:3002/api/health

# æˆ–ä½¿ç”¨ wrk
wrk -t4 -c100 -d30s http://localhost:3002/api/health
```

---

## ğŸ“Š ç›‘æ§å’Œæ—¥å¿—

### 1. åº”ç”¨ç›‘æ§

```bash
# ä½¿ç”¨ PM2 ç›‘æ§
pm2 monit

# æŸ¥çœ‹å®æ—¶æ—¥å¿—
pm2 logs --lines 100
```

### 2. æ—¥å¿—ç®¡ç†

```bash
# åç«¯æ—¥å¿—
tail -f backend/logs/app.log

# åé¦ˆæ—¥å¿—
tail -f data/feedbacks/user-feedbacks.jsonl

# Nginx æ—¥å¿—
tail -f /var/log/nginx/access.log
tail -f /var/log/nginx/error.log
```

### 3. æ€§èƒ½ç›‘æ§

**æ¨èå·¥å…·**:
- **New Relic** - åº”ç”¨æ€§èƒ½ç›‘æ§
- **Datadog** - åŸºç¡€è®¾æ–½ç›‘æ§
- **Sentry** - é”™è¯¯è¿½è¸ª
- **Google Analytics** - ç”¨æˆ·è¡Œä¸ºåˆ†æ

---

## ğŸ”’ å®‰å…¨é…ç½®

### 1. HTTPS é…ç½®

```bash
# ä½¿ç”¨ Let's Encrypt
sudo certbot --nginx -d your-domain.com
```

### 2. é˜²ç«å¢™é…ç½®

```bash
# å…è®¸ HTTP/HTTPS
sudo ufw allow 80/tcp
sudo ufw allow 443/tcp

# é™åˆ¶åç«¯ç«¯å£ï¼ˆä»…æœ¬åœ°è®¿é—®ï¼‰
sudo ufw deny 3002/tcp
```

### 3. ç¯å¢ƒå˜é‡ä¿æŠ¤

```bash
# è®¾ç½®æ–‡ä»¶æƒé™
chmod 600 backend/.env

# ä¸è¦æäº¤åˆ° Git
echo "backend/.env" >> .gitignore
```

---

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### 1. å¯ç”¨ Gzip å‹ç¼©

```nginx
# Nginx é…ç½®
gzip on;
gzip_vary on;
gzip_min_length 1024;
gzip_types text/plain text/css text/xml text/javascript application/javascript application/json;
```

### 2. å¯ç”¨ç¼“å­˜

```nginx
# é™æ€èµ„æºç¼“å­˜
location ~* \.(js|css|png|jpg|jpeg|gif|ico|svg)$ {
    expires 1y;
    add_header Cache-Control "public, immutable";
}
```

### 3. æ•°æ®åº“ä¼˜åŒ–ï¼ˆå¦‚æœä½¿ç”¨ï¼‰

```bash
# å®šæœŸæ¸…ç†æ—§æ•°æ®
# åˆ›å»ºå®šæ—¶ä»»åŠ¡
crontab -e

# æ¯å¤©å‡Œæ™¨ 2 ç‚¹æ¸…ç† 30 å¤©å‰çš„åé¦ˆ
0 2 * * * /path/to/cleanup-old-feedbacks.sh
```

---

## ğŸ”„ å¤‡ä»½ç­–ç•¥

### 1. æ•°æ®å¤‡ä»½

```bash
# åˆ›å»ºå¤‡ä»½è„šæœ¬
cat > backup.sh << 'EOF'
#!/bin/bash
DATE=$(date +%Y%m%d_%H%M%S)
BACKUP_DIR="/backups/exam-analyzer"

# å¤‡ä»½åé¦ˆæ•°æ®
mkdir -p $BACKUP_DIR
cp -r data/feedbacks $BACKUP_DIR/feedbacks_$DATE

# å‹ç¼©å¤‡ä»½
tar -czf $BACKUP_DIR/backup_$DATE.tar.gz $BACKUP_DIR/feedbacks_$DATE
rm -rf $BACKUP_DIR/feedbacks_$DATE

# åˆ é™¤ 30 å¤©å‰çš„å¤‡ä»½
find $BACKUP_DIR -name "backup_*.tar.gz" -mtime +30 -delete

echo "Backup completed: $BACKUP_DIR/backup_$DATE.tar.gz"
EOF

chmod +x backup.sh

# è®¾ç½®å®šæ—¶å¤‡ä»½
crontab -e
# æ¯å¤©å‡Œæ™¨ 3 ç‚¹å¤‡ä»½
0 3 * * * /path/to/backup.sh
```

### 2. é…ç½®å¤‡ä»½

```bash
# å¤‡ä»½é…ç½®æ–‡ä»¶
cp backend/.env backend/.env.backup
cp config/llm.json config/llm.json.backup
```

---

## ğŸš¨ æ•…éšœæ’æŸ¥

### é—®é¢˜ 1: åç«¯æ— æ³•å¯åŠ¨

**æ£€æŸ¥æ­¥éª¤**:
```bash
# 1. æ£€æŸ¥ç«¯å£å ç”¨
lsof -i :3002

# 2. æ£€æŸ¥æ—¥å¿—
tail -f backend/logs/error.log

# 3. æ£€æŸ¥é…ç½®
cat backend/.env

# 4. æ£€æŸ¥ä¾èµ–
npm list
```

### é—®é¢˜ 2: å‰ç«¯æ— æ³•è®¿é—®

**æ£€æŸ¥æ­¥éª¤**:
```bash
# 1. æ£€æŸ¥ Nginx çŠ¶æ€
sudo systemctl status nginx

# 2. æ£€æŸ¥ Nginx é…ç½®
sudo nginx -t

# 3. æŸ¥çœ‹é”™è¯¯æ—¥å¿—
tail -f /var/log/nginx/error.log
```

### é—®é¢˜ 3: åé¦ˆæäº¤å¤±è´¥

**æ£€æŸ¥æ­¥éª¤**:
```bash
# 1. æ£€æŸ¥åé¦ˆç›®å½•æƒé™
ls -la data/feedbacks/

# 2. æ£€æŸ¥ç£ç›˜ç©ºé—´
df -h

# 3. æµ‹è¯• API
curl -X POST http://localhost:3002/api/feedback \
  -H "Content-Type: application/json" \
  -d '{"feedbackType":"test","rating":5,"content":"test"}'
```

---

## ğŸ“ æ”¯æŒå’Œç»´æŠ¤

### æ—¥å¸¸ç»´æŠ¤ä»»åŠ¡

**æ¯æ—¥**:
- [ ] æ£€æŸ¥æœåŠ¡çŠ¶æ€
- [ ] æŸ¥çœ‹é”™è¯¯æ—¥å¿—
- [ ] ç›‘æ§æ€§èƒ½æŒ‡æ ‡

**æ¯å‘¨**:
- [ ] åˆ†æç”¨æˆ·åé¦ˆ
- [ ] æ£€æŸ¥ç£ç›˜ç©ºé—´
- [ ] æ›´æ–°ä¾èµ–åŒ…

**æ¯æœˆ**:
- [ ] å¤‡ä»½éªŒè¯
- [ ] å®‰å…¨æ›´æ–°
- [ ] æ€§èƒ½ä¼˜åŒ–

### ç´§æ€¥è”ç³»

- **æŠ€æœ¯æ”¯æŒ**: [æ‚¨çš„è”ç³»æ–¹å¼]
- **æ–‡æ¡£**: `.kiro/specs/quality-optimization/`
- **æµ‹è¯•æŒ‡å—**: `QUICK_START_TESTING.md`

---

## âœ… éƒ¨ç½²å®Œæˆæ£€æŸ¥

éƒ¨ç½²å®Œæˆåï¼Œè¯·ç¡®è®¤ä»¥ä¸‹é¡¹ç›®ï¼š

- [ ] åç«¯æœåŠ¡æ­£å¸¸è¿è¡Œ
- [ ] å‰ç«¯é¡µé¢å¯ä»¥è®¿é—®
- [ ] å›¾ç‰‡ä¸Šä¼ åŠŸèƒ½æ­£å¸¸
- [ ] åˆ†æåŠŸèƒ½æ­£å¸¸
- [ ] åé¦ˆæäº¤åŠŸèƒ½æ­£å¸¸
- [ ] æ•°æ®æŒä¹…åŒ–æ­£å¸¸
- [ ] æ—¥å¿—è®°å½•æ­£å¸¸
- [ ] ç›‘æ§ç³»ç»Ÿæ­£å¸¸
- [ ] å¤‡ä»½ç­–ç•¥å·²å¯ç”¨
- [ ] å®‰å…¨é…ç½®å·²å®Œæˆ

---

## ğŸ‰ éƒ¨ç½²æˆåŠŸï¼

æ­å–œï¼æ‚¨çš„è€ƒè¯•åˆ†æç³»ç»Ÿå·²æˆåŠŸéƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒã€‚

**ä¸‹ä¸€æ­¥**:
1. ç›‘æ§ç³»ç»Ÿè¿è¡ŒçŠ¶æ€
2. æ”¶é›†ç”¨æˆ·åé¦ˆ
3. æŒç»­ä¼˜åŒ–æ€§èƒ½
4. å®šæœŸæ›´æ–°åŠŸèƒ½

**éœ€è¦å¸®åŠ©ï¼Ÿ**
- æŸ¥çœ‹æ–‡æ¡£: `.kiro/specs/quality-optimization/`
- è¿è¡Œæµ‹è¯•: `QUICK_START_TESTING.md`
- æŸ¥çœ‹æ—¥å¿—: `pm2 logs`

---

**ç¥æ‚¨ä½¿ç”¨æ„‰å¿«ï¼** ğŸš€âœ¨

